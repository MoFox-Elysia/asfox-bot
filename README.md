# 错题整理软件 - Android应用

一款专为学习设计的错题整理软件，帮助用户高效管理错题、组卷和复习。

## 功能特性

### 1. 拍错题（图片切割）
- 支持拍照或从相册选择图片
- 框选题目区域
- 保存到草稿箱或直接添加到错题库

### 2. 草稿箱
- 暂存用户上传的图片
- 支持快速添加到错题库
- 支持删除草稿

### 3. 错题库
- 多级目录结构：科目 > 年级 > 章节/知识点/专题
- 支持按科目、年级、章节、知识点、专题筛选
- 按重要性和时间排序
- 2列缩略图预览

### 4. 错题信息编辑
- **学科**（必填）：选择已有科目或创建新科目
- **年级**（必填）：小学、初中、高中
- **章节/知识点/专题**（至少填一个）：三种不同的整理逻辑
- **重要性**（可选）：用于排序，越重要越靠前
- **时间**（自动获取）：用于排序

### 5. 组卷
- A4/A3高分辨率模板（>300 DPI）
- 从错题库选择多道错题
- 自由拖动错题到模板任意位置
- 保存为图片至本地相册或保存至题库

### 6. 试卷库
- 目录结构：科目 > 年级 > 卷组
- 自定义卷组名称
- 年级自动取最高年级
- 1列缩略图预览

### 7. 导入导出
- 一键导出全部数据为压缩包
- 单独导出试卷/错题为图片
- 单独导出卷组为PDF文件
- 支持导入数据恢复

### 8. 打印
- 在卷组、试卷、错题最大化预览界面提供打印选项
- 调用系统打印服务

### 9. 缩略预览
- 错题：2列预览
- 试卷和卷组：1列预览
- 提供缩略图便于选择

### 10. 主界面
- 简洁明了的6个功能入口
- 大字体设计，适合中老年用户
- 界面清晰，操作简单

## 技术架构

### 技术栈
- **编程语言**: Python 3.x
- **UI框架**: Kivy 2.3.0
- **数据库**: SQLite
- **图片处理**: Pillow 10.3.0
- **PDF生成**: fpdf2 2.7.6
- **平台支持**: Android（通过Buildozer打包）

### 项目结构
```
C:\Users\Elysia\Desktop\STUDY\
├── main.py                      # 应用入口
├── database.py                  # 数据库管理
├── main_screen.py               # 主界面
├── photo_screen.py              # 拍错题界面
├── draft_screen.py              # 草稿箱界面
├── question_library_screen.py   # 错题库界面
├── question_edit_screen.py      # 错题编辑界面
├── paper_edit_screen.py         # 组卷编辑界面
├── paper_library_screen.py      # 试卷库界面
├── import_export.py             # 导入导出模块
├── print_service.py             # 打印服务模块
├── utils.py                     # 工具函数
├── requirements.txt             # 依赖包列表
├── buildozer.spec               # Android打包配置
└── README.md                    # 项目说明
```

## 安装使用

### 开发环境配置

1. **安装Python依赖**
```bash
cd C:\Users\Elysia\Desktop\STUDY
pip install -r requirements.txt
```

2. **运行应用（桌面测试）**
```bash
python main.py
```

### Android打包

1. **安装Buildozer**
```bash
pip install buildozer
```

2. **初始化Buildozer**
```bash
buildozer init
```

3. **构建APK**
```bash
buildozer android debug
```

4. **构建发布版APK**
```bash
buildozer android release
```

## 使用说明

### 基本流程

1. **添加错题**
   - 点击"拍错题"按钮
   - 选择或拍照获取图片
   - 框选题目区域
   - 选择保存到草稿箱或直接添加到错题库

2. **编辑错题信息**
   - 在错题库中找到错题
   - 点击"编辑"按钮
   - 填写科目、年级、章节/知识点/专题
   - 设置重要性（可选）
   - 保存

3. **组卷**
   - 点击"组卷"按钮
   - 选择纸张大小（A4/A3）
   - 点击"选择错题"
   - 勾选要添加的错题
   - 确认后错题出现在候选栏
   - 拖动错题到模板上
   - 调整位置和大小
   - 保存为图片或保存到题库

4. **查看试卷**
   - 点击"试卷库"按钮
   - 按科目、年级、卷组筛选
   - 点击试卷查看详情
   - 支持打印和导出

5. **导入导出**
   - 点击"导入导出"按钮
   - 选择导出全部数据或导入数据
   - 支持单独导出试卷/错题/卷组

## 注意事项

1. **权限要求**
   - 相机权限：用于拍照
   - 存储权限：用于保存图片和数据

2. **文件存储**
   - 数据存储在：`/sdcard/错题整理软件/data/`
   - 图片存储在：`/sdcard/错题整理软件/images/`
   - 导出文件：`/sdcard/错题整理软件/export/`

3. **界面设计**
   - 大字体（24-48sp）
   - 按钮较大（高度80-120）
   - 简洁明了，适合中老年用户

## 开发计划

- [ ] 增加OCR文字识别功能
- [ ] 支持添加笔记和解析
- [ ] 增加错题统计和复习提醒
- [ ] 支持云端同步
- [ ] 优化图片处理性能
- [ ] 增加更多试卷模板

## 常见问题

### Q: 如何备份我的数据？
A: 点击"导入导出"按钮，选择"导出全部数据"，会生成一个压缩包，保存在导出目录中。

### Q: 如何在其他设备上恢复数据？
A: 点击"导入导出"按钮，选择"导入数据"，选择之前导出的压缩包即可恢复。

### Q: 打印功能如何使用？
A: 在错题或试卷的详情界面，点击"打印"按钮，系统会调用默认打印服务。

### Q: 支持哪些图片格式？
A: 支持 PNG、JPG、JPEG、BMP 等常见图片格式。

## 许可证

本项目仅供学习和个人使用。

## 联系方式

如有问题或建议，请联系开发者。
